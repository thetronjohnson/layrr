var __defProp=Object.defineProperty,__defNormalProp=(e,t,i)=>t in e?__defProp(e,t,{enumerable:!0,configurable:!0,writable:!0,value:i}):e[t]=i,__publicField=(e,t,i)=>__defNormalProp(e,"symbol"!=typeof t?t+"":t,i);!function(){"use strict";"undefined"!=typeof window&&new class{constructor(){__publicField(this,"isSelectionMode",!1),__publicField(this,"hoveredElement",null),__publicField(this,"highlightOverlay",null),this.init()}init(){console.log("[Layrr Minimal] Initializing..."),this.createHighlightOverlay(),window.addEventListener("message",this.handleMessage.bind(this)),document.addEventListener("mousemove",this.handleMouseMove.bind(this),!0),document.addEventListener("click",this.handleClick.bind(this),!0),this.postMessage({type:"LAYRR_READY"}),console.log("[Layrr Minimal] Ready")}createHighlightOverlay(){this.highlightOverlay=document.createElement("div"),this.highlightOverlay.id="layrr-highlight",this.highlightOverlay.style.cssText="\n      position: absolute;\n      pointer-events: none;\n      z-index: 2147483646;\n      border: 2px solid #a78bfa;\n      background: rgba(167, 139, 250, 0.1);\n      transition: all 0.15s ease-out;\n      display: none;\n    ",document.body.appendChild(this.highlightOverlay)}handleMessage(e){const{type:t,payload:i}=e.data;switch(t){case"ENABLE_SELECTION_MODE":this.enableSelectionMode();break;case"DISABLE_SELECTION_MODE":this.disableSelectionMode();break;case"HIGHLIGHT_ELEMENT":this.highlightElementBySelector(i.selector)}}enableSelectionMode(){this.isSelectionMode=!0,document.body.style.cursor="crosshair",console.log("[Layrr Minimal] Selection mode enabled")}disableSelectionMode(){this.isSelectionMode=!1,document.body.style.cursor="",this.hideHighlight(),console.log("[Layrr Minimal] Selection mode disabled")}handleMouseMove(e){if(!this.isSelectionMode)return;const t=e.target;"layrr-highlight"!==t.id&&("layrr-container"===t.id||t.closest("#layrr-container")||t!==this.hoveredElement&&(this.hoveredElement=t,this.showHighlight(t)))}handleClick(e){if(!this.isSelectionMode)return;e.preventDefault(),e.stopPropagation();const t=e.target;"layrr-highlight"!==t.id&&("layrr-container"===t.id||t.closest("#layrr-container")||this.selectElement(t))}selectElement(e){const t=this.getElementInfo(e);console.log("[Layrr Minimal] Element selected:",t),this.postMessage({type:"ELEMENT_SELECTED",payload:t}),this.disableSelectionMode()}getElementInfo(e){const t=e.getBoundingClientRect(),i=Array.from(e.classList),l=e.id,s=e.tagName;let o=s.toLowerCase();if(l)o=`#${l}`;else if(i.length>0)o+="."+i.join(".");else{const t=e.parentElement;t&&(o+=`:nth-child(${Array.from(t.children).indexOf(e)+1})`)}return{tagName:s,classes:i,id:l,selector:o,bounds:t.toJSON()}}showHighlight(e){if(!this.highlightOverlay)return;const t=e.getBoundingClientRect();this.highlightOverlay.style.display="block",this.highlightOverlay.style.top=t.top+window.scrollY+"px",this.highlightOverlay.style.left=t.left+window.scrollX+"px",this.highlightOverlay.style.width=t.width+"px",this.highlightOverlay.style.height=t.height+"px"}hideHighlight(){this.highlightOverlay&&(this.highlightOverlay.style.display="none"),this.hoveredElement=null}highlightElementBySelector(e){try{const t=document.querySelector(e);t&&(this.showHighlight(t),t.scrollIntoView({behavior:"smooth",block:"center"}))}catch(t){console.error("[Layrr Minimal] Invalid selector:",e,t)}}postMessage(e){window.parent.postMessage(e,"*")}}}();
